%header#header{:class => controller.controller_name != 'home' ? "top-position" : false }
  .inline
    - if Rails.env.production?
      = link_to image_tag('logo.png'), '/', :alt => "Rahvakogu", :class => :logo
    - else
      = link_to image_tag('staging_logo.png'), '/', :alt => "Rahvakogu staging", :class => :logo

    %nav#mainMenu
      - @categories.each do |category|
        = link_to category.name, issue_path(category), :class => (@category.nil? ? false : (@category == category ? :active : false))

    - if logged_in?
      %li.signin

        = link_to image_tag(current_user.buddy_icon(:icon_24)) + 'Minu konto', '#', :class => 'logIn profile my_account'
    - else
      %li.signin= link_to 'Sisene', '#', :class => 'logIn signin'

- if logged_in?
  = render :partial => "shared/user_info"
  = render :partial => "shared/notifications"
- else
  = render :partial => "users/login"

:javascript
  $(document).ready(function() {

    $("a.signin").click(function(e) {
        e.preventDefault();
        $("#sib_login_form").toggle();
        $(".signin").toggleClass("menu-open");
    });
    $("#sib_login_form").mouseup(function() {
        return false
    });

    $(document).mouseup(function(e) {
        if($(e.target).parent("a.signin").length==0) {
            $(".signin").removeClass("menu-open");
            $("#sib_login_form").hide();
        }
    });
      $("a.profile").click(function(e) {
          e.preventDefault();
          $("#sib_profile").toggle();
          $(".profile").toggleClass("menu-open");
      });

      $("#sib_profile").mouseup(function() {
          return false
      });
      $(document).mouseup(function(e) {
          if($(e.target).parent("a.profile").length==0) {
              $(".profile").removeClass("menu-open");
              $("#sib_profile").hide();
          }
      });

  });
